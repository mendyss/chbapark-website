<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>זמני היום ופרשת השבוע</title>
    <style>
        /* CSS בסיסי כדי שייראה נחמד */
        body { font-family: Assistant, Arial, sans-serif; max-width: 600px; margin: 20px auto; padding: 15px; border: 1px solid #eee; border-radius: 8px; }
        h1, h2 { color: #2c3e50; }
        #location { color: #3498db; }
        ul { list-style-type: none; padding: 0; }
        li { background-color: #f9f9f9; margin-bottom: 5px; padding: 10px; border-radius: 4px; }
        li strong { color: #333; }
    </style>
</head>
<body>

    <h1>זמני היום והלכה</h1>
    <h2 id="parasha_title">טוען את פרשת השבוע...</h2>

    <hr>

    <h2>זמנים עבור <span id="location">טוען מיקום...</span></h2>
    <ul>
        <li><strong>עלות השחר:</strong> <span id="alot_hashachar">...</span></li>
        <li><strong>זריחה:</strong> <span id="sunrise">...</span></li>
        <li><strong>סוף זמן קריאת שמע:</strong> <span id="sof_zman_ksh">...</span></li>
        <li><strong>חצות היום:</strong> <span id="chatzot">...</span></li>
        <li><strong>שקיעה:</strong> <span id="sunset">...</span></li>
        <li><strong>צאת הכוכבים:</strong> <span id="tzeit_hakochavim">...</span></li>
    </ul>

    <script>
   // פונקציה זו רצה אוטומטית כשהדף נטען
document.addEventListener('DOMContentLoaded', function() {
    fetchZmanim();
    fetchParasha();
});

// פונקציה להבאת והצגת זמני היום
function fetchZmanim() {
    // ה-ID של באר שבע. אפשר לשנות לכל עיר אחרת
    const geonameid = '295530'; 
    const zmanimUrl = `https://www.hebcal.com/zmanim?cfg=json&geonameid=${geonameid}`;

    // פקודת fetch היא ה"מלצר" שיוצא למטבח (ל-API)
    fetch(zmanimUrl)
        .then(response => response.json()) // כשהתשובה מגיעה, המר אותה לאובייקט JSON
        .then(data => {
            // כשיש לנו את הנתונים, נכניס אותם ל-HTML
            console.log("קיבלנו זמנים:", data); // (לצורך בדיקה בקונסול של הדפדפן)

            // עדכון המיקום
            document.getElementById('location').textContent = data.location.title;
            
            // עדכון הזמנים
            // הערה: התאריכים מגיעים בפורמט ISO. אנו חותכים רק את השעה.
            document.getElementById('alot_hashachar').textContent = new Date(data.times.alot_hashachar).toLocaleTimeString('he-IL', {hour: '2-digit', minute:'2-digit'});
            document.getElementById('sunrise').textContent = new Date(data.times.sunrise).toLocaleTimeString('he-IL', {hour: '2-digit', minute:'2-digit'});
            document.getElementById('sof_zman_ksh').textContent = new Date(data.times.sof_zman_krishm_ma).toLocaleTimeString('he-IL', {hour: '2-digit', minute:'2-digit'});
            document.getElementById('chatzot').textContent = new Date(data.times.chatzot).toLocaleTimeString('he-IL', {hour: '2-digit', minute:'2-digit'});
            document.getElementById('sunset').textContent = new Date(data.times.sunset).toLocaleTimeString('he-IL', {hour: '2-digit', minute:'2-digit'});
            document.getElementById('tzeit_hakochavim').textContent = new Date(data.times.tzeit_hakochavim).toLocaleTimeString('he-IL', {hour: '2-digit', minute:'2-digit'});
        })
        .catch(error => {
            // טיפול בשגיאות אם ה-API לא עובד
            console.error('שגיאה בהבאת זמני היום:', error);
            document.getElementById('location').textContent = "שגיאה בטעינת הנתונים";
        });
}

// פונקציה להבאת והצגת פרשת השבוע
function fetchParasha() {
    const parashaUrl = 'https://www.hebcal.com/hebcal?v=1&cfg=json&maj=on&min=off&mod=off&nx=off&gy=2024&gm=6&gd=17&gd=17';

    fetch(parashaUrl)
        .then(response => response.json())
        .then(data => {
            console.log("קיבלנו אירועים:", data);
            
            // נמצא את הפריט הראשון שהוא פרשת השבוע
            const parashaItem = data.items.find(item => item.category === 'parashat');
            
            if (parashaItem) {
                document.getElementById('parasha_title').textContent = parashaItem.title;
            } else {
                document.getElementById('parasha_title').textContent = "פרשת השבוע לא נמצאה";
            }
        })
        .catch(error => {
            console.error('שגיאה בהבאת פרשת השבוע:', error);
            document.getElementById('parasha_title').textContent = "שגיאה בטעינת הפרשה";
        });
}


    </script>

</body>
</html>
